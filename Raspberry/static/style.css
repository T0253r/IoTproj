@font-face {
    font-family: "Roboto Mono";
    src: url("Roboto-Mono-regular.woff2") format("woff2");
    font-weight: normal;
    font-style: normal;
}

:root {
    --text: #f4e7e7;
    --text-secondary: #8f8f8f;
    --background: #1c1818;
    --primary: #ff4c29;
    --secondary: #281b19;
    --accent: #e02b2b;
    --blue: #0f5c6b;

    font-family: Inter, sans-serif;
}

body {
    background: var(--background);
    color: var(--text);
    padding-inline: 0.4rem;
    padding-bottom: 5rem;

    max-width: 412px;
    margin: auto;
    --screen-width: min(100vw, 412px);
}

nav {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    width: calc(100% - 2rem);
    padding-inline: 1rem;

    border-bottom: 0.2em solid var(--secondary);

    .app-title {
        display: flex;
        gap: 0.5rem;
        align-items: center;
        font-size: 1rem;
        vertical-align: middle;
        font-weight: bold;
        margin-right: auto;
    }
}

h1 {
    font-size: 1.5em;
    margin-left: 1rem;
    margin-bottom: 0;
    width: fit-content;
    background: linear-gradient(to right, var(--text) 50%, var(--primary) 150%);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

a {
    text-decoration: none;
    color: var(--text);
}

/* ----------------------------
MARK: Controller cards 
---------------------------- */

.controller-row {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-start;
    gap: 1rem;
    padding-block: 1rem;
    overflow-x: auto;
    position: relative;

    /* Hide scrollbar */
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.controller-row::-webkit-scrollbar {
    display: none;
}

.controller-row::before {
    content: "";
    position: sticky;
    left: -2px;
    height: 10rem;
    min-width: 0.5rem;
    background: linear-gradient(to left, transparent, var(--background));
    pointer-events: none;
    z-index: 1000;
}

.controller-row::after {
    content: "";
    position: sticky;
    right: -2px;
    height: 10rem;
    min-width: 0.5rem;
    background: linear-gradient(to right, transparent, var(--background));
    pointer-events: none;
    z-index: 1000;
}

.no-controllers-message {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    min-height: 10rem;
    text-align: center;
}

.no-controllers-message .no-controllers-icon {
    width: 4rem;
    height: 4rem;
    aspect-ratio: 1;
    color: var(--primary);
}

.no-controllers-content hr {
    height: 0.2rem;
    border: none;
    background-color: var(--primary);
}

.no-controllers-content div {
    margin-top: 1rem;

    a {
        text-decoration: underline;
        color: var(--primary);
    }
}

.no-controllers-content h3 {
    color: var(--text);
    margin: 0 0 0.5rem 0;
    font-size: 1.5em;
}

.no-controllers-content p {
    color: var(--text-secondary);
    margin: 0;
    font-size: 0.9em;
}

.controller-card {
    position: relative;
    background-color: var(--secondary);
    padding: 1rem;
    border-radius: 0.5rem;
    min-width: calc(var(--screen-width) * 0.6);
    max-width: 3rem;
    overflow: hidden;

    cursor: pointer;
    outline: 0.2em solid var(--vortex-darker);
    outline-offset: 0.1em;

    transition:
        opacity 0.4s,
        outline-color 0.2s,
        --vortex-main 0.5s,
        --vortex-accent 0.5s,
        outline-color 0.2s;

    opacity: 1;

    @starting-style {
        opacity: 0;
    }
}
.controller-card.offline, .controller-details.offline{
    opacity: 0.6;
    pointer-events: none;

    --vortex-main: var(--accent);
}

.controller-details.stable.offline::before{
    content: "Offline";
}

.controller-card.offline::after {
    content: "Offline";
    color: var(--accent);
    font-size: 1.2rem;
    font-family: Inter, sans-serif;
    font-weight: bold;
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
}

.controller-name {
    display: block;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    max-width: 90%;
}

.controller-card-temp {
    display: flex;
    justify-content: space-between;
    padding-block: 0.5em;
    position: relative;
    z-index: 1;

    div {
        display: flex;
        flex-direction: column;
        gap: 0.1em;
        font-size: 0.7em;

        strong {
            font-size: 2.2em;
            font-family: "Roboto Mono", "Courier New", Courier, monospace;
            font-weight: 900;
        }
    }
}

.controller-card .card-icon {
    position: absolute;
    bottom: 1rem;
    right: 1rem;
    width: 32px;
    height: 32px;
}

.card-vortex {
    position: absolute;
    bottom: -50%;
    right: -30%;
    height: 130%;
    aspect-ratio: 1;
}

/* Vortex rotation animations */
@keyframes spin-clockwise {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

@keyframes spin-counter-clockwise {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(-360deg);
    }
}

.card-vortex svg circle:nth-child(odd) {
    animation: spin-clockwise 40s linear infinite;
    transform-origin: 50% 50%;
    transition: opacity 0.8s ease-in-out;
}

.card-vortex svg circle:nth-child(even) {
    animation: spin-counter-clockwise 30s linear infinite;
    transform-origin: 50% 50%;
    transition: opacity 0.8s ease-in-out;
}

@property --vortex-main {
    syntax: "<color>";
    inherits: true;
    initial-value: #fff;
}

@property --vortex-accent {
    syntax: "<color>";
    inherits: true;
    initial-value: #088e28;
}

.controller-card {
    /* transition: --vortex-main 0.5s, --vortex-accent 0.5s, outline-color 0.2s; */

    &.active {
        outline-color: var(--vortex-main);
    }
}

.heating {
    --vortex-main: var(--primary);
    --vortex-accent: var(--accent);
}

.cooling {
    --vortex-main: var(--blue);
    --vortex-accent: var(--text);

    .card-vortex svg circle {
        animation-direction: reverse;
        opacity: 10%;
        transition: opacity 1.2s ease-in-out;
    }
}

.stable {
    --vortex-main: var(--text-secondary);
    --vortex-accent: var(--secondary);

    .card-vortex svg circle {
        animation-play-state: paused;
        opacity: 10%;
        transition: opacity 1.2s ease-in-out;
    }
}

.stable,
.heating,
.cooling {
    --vortex-darker: color-mix(
        in srgb,
        var(--vortex-main) 20%,
        var(--secondary)
    );
}

.controller-card {
    background: linear-gradient(
        15deg,
        var(--vortex-main) -100%,
        var(--background)
    );
}

.card-vortex {
    svg {
        stop:first-child {
            stop-color: var(--vortex-accent);
        }

        stop:last-child {
            stop-color: var(--vortex-main);
        }
    }
}

.info-small {
    color: var(--text);
    opacity: 0.5;
}

/* ----------------------------
MARK: Controller details 
---------------------------- */

.controller-grid {
    position: relative;
    width: 100%;
}

.controller-details {
    position: relative;
    /* background-color: var(--background); */
    background: linear-gradient(
        15deg,
        var(--vortex-main) -100%,
        var(--background)
    );

    padding: 1.5rem;
    padding-inline: 1rem;
    margin-inline: 1.5rem;
    border-radius: 0.5rem;

    outline: 0.2em solid var(--vortex-darker);
    outline-offset: 0.1em;
    transition:
        --vortex-main 0.5s,
        --vortex-accent 0.5s,
        outline-color 0.2s,
        opacity 0.4s 0.1s,
        display 0.6s;
    transition-behavior: allow-discrete;

    opacity: 1;

    @starting-style {
        opacity: 0;
        position: absolute;
        top: 0;
    }

    &[style="display: none;"] {
        opacity: 0;
        position: absolute;
        top: 0;
        pointer-events: none;
    }
}

.controller-details::before {
    position: absolute;
    top: 1.5rem;
    right: 1rem;
    color: var(--vortex-main);
    opacity: 0.5;
    font-weight: 900;
}

.controller-details.heating::before {
    content: "Grzanie";
}

.controller-details.cooling::before {
    content: "Czekanie";
}

.controller-details.stable::before {
    content: "Stabilnie";
}

.controller-details h2 {
    font-size: 1.3rem;
    margin: 0 0 1.5rem 0;
    color: var(--text);
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    max-width: 75%;
}

.temp-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1rem;

    & > .temp-box:nth-child(2) {
        grid-row: span 2;
        text-align: center;
    }
}

.temp-box,
.status-box {
    padding: 1rem;
    border-radius: 0.25rem;

    background-color: var(--background);
    outline: 0.2em solid var(--vortex-darker);
    outline-offset: 0.1em;
    transition: outline 0.2s;

    /* background: linear-gradient(15deg, var(--primary) -100%, var(--background)); */

    .status-line:last-child {
        font-size: 1.6rem;
        opacity: 1;
        color: var(--text);
    }
}

.temp-box .temp-box-value {
    font-family: "Roboto Mono", "Courier New", Courier, monospace;
}

/* .status-box {
    position: relative;

    &::before {
        content: "";
        position: absolute;
        top: -0.3em;
        right: -1rem;
        width: 2rem;
        height: calc(100% + 0.2em);
        background-color: var(--background);
        border-block: 0.2em solid var(--secondary);
    }
} */

.temp-box-label {
    font-size: 0.7rem;
    margin-bottom: 0.5rem;
    opacity: 0.9;
}

.temp-box-value {
    font-size: min(2.5rem, 8vw);
    font-weight: 400;
    color: var(--text);
}

.temp-controls {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

.temp-btn {
    background: none;
    border: none;
    color: var(--text);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.25rem;
    line-height: 1;
}

.temp-btn:hover {
    color: var(--primary);
}

.temp-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

/* Apple-style Temperature Picker */
.temp-picker-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 0.5rem;

    --option-height: 30px;
}

.picker-carousel-wrapper {
    height: calc(var(--option-height) * 3);
    overflow: hidden;
    position: relative;
    width: 100%;
    mask-image: linear-gradient(
        to bottom,
        transparent,
        black calc(var(--option-height) * 1),
        black calc(var(--option-height) * 2),
        transparent
    );
    -webkit-mask-image: linear-gradient(
        to bottom,
        transparent,
        black calc(var(--option-height) * 1),
        black calc(var(--option-height) * 2),
        transparent
    );
}

.picker-carousel {
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease;
    padding-top: var(--option-height);
    font-family: "Roboto Mono", "Courier New", Courier, monospace;
}

.picker-option {
    height: var(--option-height);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1em;
    color: var(--text);
    opacity: 0.3;
    transition:
        opacity 0.2s,
        font-size 0.2s;
    user-select: none;
}

.picker-option.selected {
    opacity: 1;
    font-size: 1.5em;
    font-weight: 500;
}

.picker-arrow {
    background: none;
    border: none;
    color: var(--text);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.5rem;
    line-height: 1;
    user-select: none;
    opacity: 0.7;

    transition:
        opacity 0.2s,
        color 0.2s,
        transform 0.1s;

    &:hover {
        opacity: 1;
    }

    &.disabled {
        opacity: 0.1;
        cursor: not-allowed;
        user-select: none;
        pointer-events: none;
    }
}

.picker-arrow:active {
    transform: scale(0.9);
}

.status-line {
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
    opacity: 0.9;

    span {
        display: block;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        max-width: calc(var(--screen-width) * 0.3);
    }
}

.section-title {
    font-size: 1.1rem;
    margin: 2rem 0 1rem 0;
    color: var(--text);
}

.toggle-container {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
}

.toggle-switch {
    position: relative;
    display: inline-block;
    min-width: 50px;
    height: 26px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #555;
    transition: 0.3s;
    border-radius: 26px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: var(--vortex-main);
}

input:checked + .slider:before {
    transform: translateX(120%);
}

input:disabled + .slider {
    opacity: 0.5;
    cursor: not-allowed;
}

.comfort-temp-control {
    padding: 1rem;
    border-radius: 0.25rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;

    background-color: var(--background);

    outline: 0.2em solid var(--vortex-darker);
    outline-offset: 0.1em;

    transition: opacity 0.2s;

    .temp-picker-container {
        font-size: 1.5em;
        --option-height: 40px;
    }
}

.controller-details:has(input[type="checkbox"]:not(:checked))
    .comfort-temp-control {
    opacity: 0.5;
    pointer-events: none;
    user-select: none;
}

.comfort-temp-label {
    font-size: 1rem;
}

.comfort-temp-value {
    font-size: 1.5rem;
    font-weight: 400;
}

/* Remove this old style since we're now using the picker */
.comfort-controls {
    display: none;
}

button {
    border: none;
    padding: 0.5rem 1rem;
    cursor: pointer;
    border-radius: 0.25rem;
    font-size: 0.9rem;
    background-color: var(--secondary);
    color: var(--text);
}

button:hover:not(:disabled) {
    background-color: var(--primary);
}

button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

input[type="number"] {
    background-color: #4a4a4a;
    border: 1px solid #555;
    color: var(--text);
    padding: 0.5rem;
    border-radius: 0.25rem;
    font-size: 1rem;
}

input[type="number"]:disabled {
    opacity: 0.5;
}

.info-small {
    font-size: 0.85rem;
    opacity: 0.7;
    margin-top: 0.5rem;
}

.warning-text {
    color: var(--primary);
}

.heating-icon {
    position: absolute;
    top: 2rem;
    right: 2rem;
    width: 48px;
    height: 48px;
    opacity: 0.3;
}

/* ----------------------------
MARK: Icons 
---------------------------- */

.mdi--gear {
    display: inline-block;
    width: 24px;
    height: 24px;
    --svg: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23000' d='M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97s-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1s.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64z'/%3E%3C/svg%3E");
    background-color: currentColor;
    -webkit-mask-image: var(--svg);
    mask-image: var(--svg);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
}

.mdi--hot-cold {
    display: inline-block;
    width: 24px;
    height: 24px;
    --svg: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23000' d='M12 .69L8.69 4H4v4.69L.69 12L4 15.31V20h4.69L12 23.31l1-1v-4.48l3.24 3.24l1.42-1.41L13 15v-2h2l4.66 4.66l1.41-1.42L17.83 13H22v-2h-4.17l3.24-3.24l-1.41-1.42L15 11h-2V9l4.66-4.66l-1.42-1.41L13 6.17V1.69m-2 4.4v2.04c-1.76.46-3 2.05-3 3.87a4.01 4.01 0 0 0 3 3.87v2.04A6 6 0 0 1 6 12c0-2.93 2.11-5.43 5-5.91'/%3E%3C/svg%3E");
    background-color: currentColor;
    -webkit-mask-image: var(--svg);
    mask-image: var(--svg);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
}

.mdi--information-outline {
    display: inline-block;
    width: 24px;
    height: 24px;
    --svg: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23000' d='M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2z'/%3E%3C/svg%3E");
    background-color: currentColor;
    -webkit-mask-image: var(--svg);
    mask-image: var(--svg);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
}

.mdi--home-variant {
    display: inline-block;
    width: 24px;
    height: 24px;
    --svg: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23000' d='m12 3l8 6v12h-5v-7H9v7H4V9z'/%3E%3C/svg%3E");
    background-color: currentColor;
    -webkit-mask-image: var(--svg);
    mask-image: var(--svg);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
}
